(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.r({});const t=new Map;class n{static getAppender(e){return t.get(e)}static register(e,n){t.set(e,n)}constructor(){}logMessage(e,t,n,o,s){}}class o{constructor(e,t){this.order=e,this.title=t}isIncluded(e){return this.order>=e.order}}const s=new o(0,"NOLOG"),r=new o(1,"ERROR"),l=new o(2,"WARN"),i=new o(3,"INFO"),g=new o(4,"DEBUG"),a=new o(5,"TRACE"),c={NOLOG:s,ERROR:r,WARN:l,INFO:i,DEBUG:g,TRACE:a,lookup:e=>"string"!=typeof e?s:c[e.toUpperCase()]||s},u=c,p=function(e){if(!e instanceof Date)return"";let t="";return t+=e.getFullYear()+".",e.getMonth()<10?t+="0"+e.getMonth():t+=e.getMonth(),t+=".",e.getDate()<10?t+="0"+e.getDate():t+=e.getDate(),t+=" ",e.getHours()<10?t+="0"+e.getHours():t+=e.getHours(),t+=":",e.getMinutes()<10?t+="0"+e.getMinutes():t+=e.getMinutes(),t+=":",e.getSeconds()<10?t+="0"+e.getSeconds():t+=e.getSeconds(),t+=":",e.getMilliseconds()<10&&(t+="00"+e.getMilliseconds()),e.getMilliseconds()<100?t+="0"+e.getMilliseconds():t+=e.getMilliseconds(),t},d=new class extends n{logMessage(e,t,n,o,s){if(u.NOLOG==s)return;let r=[];o&&r.push(p(o)," "),r.push("***",s.title,"*** ",n),e&&(r.push(" -> "),Array.isArray(e)?Array.prototype.push.apply(r,e):r.push(e)),t&&r.push(": ",t);let l=console.log;u.ERROR==s?l=console.error:u.WARN==s?l=console.warn:u.INFO==s?l=console.info:u.DEBUG==s?l=console.debug:u.TRACE==s&&(l=console.trace),l.apply(console,r)}};n.register("ConsoleAppender",d);const f=d,h="[data-log]",w=new class extends n{isAvailable(){return!!document.querySelector(h)}logMessage(e,t,n,o,s){const r=document.querySelector(h);if(!r)return;const l=document.createElement("div");l.setAttribute("class","log-entry "+s.title);let i=p(o||new Date)+" ***"+s.title+"*** "+n;return e&&(i+=" -> "+e),t&&(i+=": "+t),l.textContent=i,r.appendChild(l)}};n.register("HtmlAppender",w);const y=w,A=self||e.g||window||{},_=new class extends n{logMessage(e,t,n,o,s){(A.__LOG__ instanceof Array||(A.__LOG__=[]),A.__LOG__).push({date:o,logLevel:s,loggerName:n,message:e,exception:t})}};n.register("MemoryAppender",_);const M=_;let O;const R=new class extends n{logMessage(e,t,n,o,s){(O&&(O=console?f:y.isAvailable()?y:M),O).logMessage(e,t,n,o,s)}};n.register("IntelligentBrowserAppender",R);const L=R,m=class{constructor(e,t){this.name=e,this.__config__=t}get config(){return this.__config__}set config(e){this.__config__=e}logError(e,t){return this.log(e,t,u.ERROR)}logWarn(e,t){this.log(e,t,u.WARN)}logInfo(e,t){this.log(e,t,u.INFO)}logDebug(e,t){this.log(e,t,u.DEBUG)}asynclogTrace(e,t){this.log(e,t,u.TRACE)}async log(e,t,n){const o=this.name,s=new Date;setTimeout((async()=>{const r=await this.config;if(!r.logLevel.isIncluded(n))return;const{appenders:l}=r;for(let r of l)r.logMessage(e,t,o,s,n)}),100)}},b={filter:"",logLevel:"NOLOG",appenders:[]},E=(e,t,n)=>!(t&&n.filter.length>=t.filter.length)&&0==e.search(t.filter),N=e=>{const t=[];for(let o of e){const e=n.getAppender(o);e&&t.push(e)}return t},v=class{constructor(e){this.data=(async e=>{if(e instanceof Array)return e;if("string"==typeof e)return(async e=>(await fetch(new URL(e,location.href))).json())(e);const t=document.querySelector("[logging-properties]");return t&&t.hasAttribute("logging-properties")?(e=t.getAttribute("logging-properties"),JSON.parse(e)):void 0})(e)}async loggerConfig(e){const t=((e,t)=>{let n=b,o=n;for(let s of t)if(E(e,s,o)?o=s:s.filter||(n=s),null!=o&&o.filter==e)return o;return o||n})(e,await this.data);return{filter:t.filter,logLevel:u.lookup(t.logLevel),appenders:N(t.appenders)}}},C=new Map;let S=new v;const D=()=>{for(let[e,t]of C)t.config=S.loggerConfig(e)},G={newLogger:e=>(C.has(e)||C.set(e,new m(e,S.loggerConfig(e))),C.get(e)),config:async function(e){if(0==arguments.length)return S.data;S=new v(await e),D()}},I=self||I||window||{};I.defaultjs=I.defaultjs||{},I.defaultjs.logging=I.defaultjs.logging||{VERSION:"1.0.0",utils,ConsoleAppender:f,ConsolenAppender:f,HtmlAppender:y,MemoryAppender:M,InteligentBrowserAppender:L,LogLevel:u,Logger:m,LoggerFactory:G}})();
//# sourceMappingURL=browser-bundle-defaultjs-logging.min.js.map