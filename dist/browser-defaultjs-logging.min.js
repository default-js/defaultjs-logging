(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{ConsoleAppender:()=>h,HtmlAppender:()=>A,InteligentBrowserAppender:()=>m,LogLevel:()=>u,Logger:()=>b,LoggerFactory:()=>G,MemoryAppender:()=>M});const o=new Map;class n{static getAppender(e){return o.get(e)}static register(e,t){o.set(e,t)}constructor(){}logMessage(e,t,o,n,r){}}class r{constructor(e,t){this.order=e,this.title=t}isIncluded(e){return this.order>=e.order}}const s=new r(0,"NOLOG"),l=new r(1,"ERROR"),g=new r(2,"WARN"),i=new r(3,"INFO"),a=new r(4,"DEBUG"),c=new r(5,"TRACE"),p={NOLOG:s,ERROR:l,WARN:g,INFO:i,DEBUG:a,TRACE:c,lookup:e=>"string"!=typeof e?s:p[e.toUpperCase()]||s},u=p,d=function(e){if(!e instanceof Date)return"";let t="";return t+=e.getFullYear()+".",e.getMonth()<10?t+="0"+e.getMonth():t+=e.getMonth(),t+=".",e.getDate()<10?t+="0"+e.getDate():t+=e.getDate(),t+=" ",e.getHours()<10?t+="0"+e.getHours():t+=e.getHours(),t+=":",e.getMinutes()<10?t+="0"+e.getMinutes():t+=e.getMinutes(),t+=":",e.getSeconds()<10?t+="0"+e.getSeconds():t+=e.getSeconds(),t+=":",e.getMilliseconds()<10&&(t+="00"+e.getMilliseconds()),e.getMilliseconds()<100?t+="0"+e.getMilliseconds():t+=e.getMilliseconds(),t},f=new class extends n{logMessage(e,t,o,n,r){if(u.NOLOG==r)return;let s=[];n&&s.push(d(n)," "),s.push("***",r.title,"*** ",o),e&&(s.push(" -> "),Array.isArray(e)?Array.prototype.push.apply(s,e):s.push(e)),t&&s.push(": ",t);let l=console.log;u.ERROR==r?l=console.error:u.WARN==r?l=console.warn:u.INFO==r?l=console.info:u.DEBUG==r?l=console.debug:u.TRACE==r&&(l=console.trace),l.apply(console,s)}};n.register("ConsoleAppender",f);const h=f,y="[data-log]",w=new class extends n{isAvailable(){return!!document.querySelector(y)}logMessage(e,t,o,n,r){const s=document.querySelector(y);if(!s)return;const l=document.createElement("div");l.setAttribute("class","log-entry "+r.title);let g=d(n||new Date)+" ***"+r.title+"*** "+o;return e&&(g+=" -> "+e),t&&(g+=": "+t),l.textContent=g,s.appendChild(l)}};n.register("HtmlAppender",w);const A=w,O=self||e.g||window||{},_=new class extends n{logMessage(e,t,o,n,r){(O.__LOG__ instanceof Array||(O.__LOG__=[]),O.__LOG__).push({date:n,logLevel:r,loggerName:o,message:e,exception:t})}};n.register("MemoryAppender",_);const M=_;let L;const R=new class extends n{logMessage(e,t,o,n,r){(L&&(L=console?h:A.isAvailable()?A:M),L).logMessage(e,t,o,n,r)}};n.register("IntelligentBrowserAppender",R);const m=R,b=class{constructor(e,t){this.name=e,this.__config__=t}get config(){return this.__config__}set config(e){this.__config__=e}logError(e,t){return this.log(e,t,u.ERROR)}logWarn(e,t){this.log(e,t,u.WARN)}logInfo(e,t){this.log(e,t,u.INFO)}logDebug(e,t){this.log(e,t,u.DEBUG)}asynclogTrace(e,t){this.log(e,t,u.TRACE)}async log(e,t,o){const n=this.name,r=new Date;setTimeout((async()=>{const s=await this.config;if(!s.logLevel.isIncluded(o))return;const{appenders:l}=s;for(let s of l)s.logMessage(e,t,n,r,o)}),100)}},v={filter:"",logLevel:"NOLOG",appenders:[]},E=(e,t,o)=>!(t&&o.filter.length>=t.filter.length)&&0==e.search(t.filter),N=e=>{const t=[];for(let o of e){const e=n.getAppender(o);e&&t.push(e)}return t},C=class{constructor(e){this.data=(async e=>{if(e instanceof Array)return e;if("string"==typeof e)return(async e=>(await fetch(new URL(e,location.href))).json())(e);const t=document.querySelector("[logging-properties]");return t&&t.hasAttribute("logging-properties")?(e=t.getAttribute("logging-properties"),JSON.parse(e)):void 0})(e)}async loggerConfig(e){const t=((e,t)=>{let o=v,n=o;for(let r of t)if(E(e,r,n)?n=r:r.filter||(o=r),null!=n&&n.filter==e)return n;return n||o})(e,await this.data);return{filter:t.filter,logLevel:u.lookup(t.logLevel),appenders:N(t.appenders)}}},S=new Map;let j=new C;const D=()=>{for(let[e,t]of S)t.config=j.loggerConfig(e)},G={newLogger:e=>(S.has(e)||S.set(e,new b(e,j.loggerConfig(e))),S.get(e)),config:async function(e){if(0==arguments.length)return j.data;j=new C(await e),D()}},I=self||I||window||{};I.defaultjs=I.defaultjs||{},I.defaultjs.logging=I.defaultjs.logging||{VERSION:"1.0.0",ConsoleAppender:h,HtmlAppender:A,MemoryAppender:M,InteligentBrowserAppender:m,LogLevel:u,Logger:b,LoggerFactory:G}})();
//# sourceMappingURL=browser-defaultjs-logging.min.js.map